# Game 模块 API 文档

## 简介
Game模块是游戏的主对象，负责管理游戏的各个系统和实体。

## 类定义

### Game

#### 构造函数
```javascript
constructor()
```
- **成员变量**：
  - `entities`：实体数组
  - `renderer`：渲染器实例
  - `physics`：物理系统实例
  - `input`：输入系统实例
  - `camera`：相机实例
  - `map`：地图实例
  - `player`：玩家实体
  - `lastTime`：上一帧时间
  - `enemySpawnDistance`：敌人生成距离，默认值为500
  - `maxEnemies`：最大敌人数量，默认值为10

#### 方法

##### initialize()
- **功能**：初始化游戏各个系统
- **描述**：初始化渲染器、输入系统、相机、物理系统，生成地图，创建玩家，并开始游戏循环

##### generateMap()
- **功能**：生成游戏地图
- **描述**：创建一个100x50的地图，瓦片大小为32

##### createPlayer()
- **功能**：创建玩家实体
- **描述**：在地图的玩家出生点创建玩家实体，并添加必要的组件

##### spawnEnemy()
- **功能**：生成敌人实体
- **描述**：在玩家视野外随机位置生成敌人，最多生成10个敌人

##### gameLoop(currentTime)
- **功能**：游戏主循环
- **参数**：
  - `currentTime`：当前时间戳
- **描述**：计算时间增量，更新游戏状态，渲染游戏，然后请求下一帧

##### update(deltaTime)
- **功能**：更新游戏状态
- **参数**：
  - `deltaTime`：时间增量，单位秒
- **描述**：随机生成敌人，更新相机，更新所有实体，更新物理系统，清理死亡实体

##### render()
- **功能**：渲染游戏
- **描述**：清空画布，渲染地图，渲染所有实体

## 使用示例

```javascript
// 创建游戏实例
const game = new Game();

// 初始化游戏
game.initialize();
```